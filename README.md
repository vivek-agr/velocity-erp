# velocity-erp
Built for speed. Engineered for scale.

Here is the detailed project structure for Velocity-ERP using flutter_rust_bridge (v2).

1. High-Level Directory Structure
    This is the root of your project. It treats the entire app as a Monorepo.

    velocity_erp/
    â”œâ”€â”€ assets/                 # Fonts, icons, and Tally-style branding
    â”œâ”€â”€ bin/                    # Automation scripts (custom CLI tools in Dart)
    â”œâ”€â”€ lib/                    # ğŸ¤ Flutter Frontend (The Skin)
    â”œâ”€â”€ rust/                   # ğŸ¦€ Rust Backend (The Brain)
    â”œâ”€â”€ rust_builder/           # Build-hook for native assets (Auto-generated)
    â”œâ”€â”€ test/                   # Flutter integration & unit tests
    â”œâ”€â”€ pubspec.yaml            # Flutter dependencies
    â””â”€â”€ Cargo.toml              # Rust Workspace manifest

2. The Rust "Brain" (/rust)
    We use a Rust Workspace approach. This allows you to split the "Engine" into modules that can be tested independently.

    rust/
    â”œâ”€â”€ Cargo.toml              # Manages dependencies for all Rust crates
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ api/                # ğŸ§© The Bridge Layer
    â”‚   â”‚   â”œâ”€â”€ mod.rs          # Module declarations
    â”‚   â”‚   â”œâ”€â”€ simple.rs       # Main entry points for Flutter calls
    â”‚   â”‚   â”œâ”€â”€ voucher_api.rs  # Specific bridge for voucher operations
    â”‚   â”‚   â””â”€â”€ report_api.rs   # Specific bridge for Balance Sheet/PnL
    â”‚   â”œâ”€â”€ core/               # âš™ï¸ Accounting Engine (Pure Rust)
    â”‚   â”‚   â”œâ”€â”€ accounting.rs   # Double-entry logic & math
    â”‚   â”‚   â”œâ”€â”€ database.rs     # SurrealDB/SQLite embedded setup
    â”‚   â”‚   â”œâ”€â”€ sync/           # LAN Sync & Multi-user P2P logic
    â”‚   â”‚   â””â”€â”€ security/       # AES-256 Encryption & data masking
    â”‚   â”œâ”€â”€ lib.rs              # Entry point for the crate
    â”‚   â””â”€â”€ frb_generated.rs    # Auto-generated by Flutter Rust Bridge (Ignore)
    â””â”€â”€ target/                 # Compiled binaries (Temporary)

3. The Flutter "Skin" (/lib)
    Since this is an ERP, the UI is complex. We organize it by Feature rather than by file type.

    lib/
    â”œâ”€â”€ main.dart               # App entrypoint & Initialization
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ api/                # Auto-generated Dart glue (from Rust)
    â”‚   â”œâ”€â”€ common/             # Reusable UI elements (Buttons, Tables)
    â”‚   â”œâ”€â”€ features/           # Modular Business Logic
    â”‚   â”‚   â”œâ”€â”€ vouchers/       # Screen & Logic for data entry
    â”‚   â”‚   â”‚   â”œâ”€â”€ voucher_screen.dart
    â”‚   â”‚   â”‚   â””â”€â”€ voucher_provider.dart (State Management)
    â”‚   â”‚   â”œâ”€â”€ reports/        # Balance Sheet, Daybook, P&L
    â”‚   â”‚   â”‚   â”œâ”€â”€ balance_sheet.dart
    â”‚   â”‚   â”‚   â””â”€â”€ drilldown_logic.dart
    â”‚   â”‚   â””â”€â”€ inventory/      # Stock management
    â”‚   â”œâ”€â”€ services/           # Peripheral logic (Printing, PDF Export)
    â”‚   â””â”€â”€ theme/              # Typography, Colors (Tally Blue/Green)
    â””â”€â”€ generated/              # Localization & Assets

4. Why this structure works for Velocity-ERP
    Separation of Concerns: If you want to change the database from SQLite to SurrealDB, you only touch rust/src/core/database.rs. Your UI remains unchanged.

    Performance: The heavy lifting (like calculating a 10-year Profit & Loss statement) happens in the rust/src/core layer without blocking the Flutter UI.

    Scalability: When you add a new feature (e.g., "Payroll"), you just add a new folder in lib/src/features/payroll and a new file in rust/src/api/payroll_api.rs.

Summary of Key Files
    Cargo.toml (Root): Ensures that Rust and Flutter versions are locked together.

    lib.rs: Defines what part of the Rust engine is "Public" and can be seen by the UI.

    main.dart: Handles the "Splash Screen" while the Rust engine initializes the local database.
